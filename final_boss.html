<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fire Dragon World Boss</title>
    <style>
        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- FIXED LAYOUT --- */
        body {
            margin: 0;
            padding: 0;
            background: #000;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            /* Prevent scrolling */
        }

        /* --- IMAGE BACKGROUND SETUP --- */
        #game-container {
            width: 100%;
            max-width: 480px;
            height: 100%;
            position: relative;
            background: #000;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .boss-bg-layer {
            position: absolute;
            inset: 0;
            z-index: 0;
            /* Filter to blend nicely with dragon */
            filter: brightness(0.8) contrast(1.1);
        }

        /* Keep Embers and Pulse */
        .magma-pulse {
            z-index: 1;
            pointer-events: none;
        }

        .bg-embers {
            z-index: 2;
            pointer-events: none;
        }

        @keyframes lavaFlowVert {
            from {
                background-position: 0 0;
            }

            to {
                background-position: 0 40px;
            }
        }

        /* Animated Embers (Ash) */
        .bg-embers {
            position: absolute;
            inset: 0;
            z-index: 10;
            pointer-events: none;
            background-image:
                radial-gradient(2px 2px at 20px 30px, #fff, transparent),
                radial-gradient(2px 2px at 150px 150px, #ffcc00, transparent),
                radial-gradient(3px 3px at 300px 80px, #ffaa00, transparent);
            background-size: 300px 300px;
            animation: floatUp 3s linear infinite;
        }

        @keyframes floatUp {
            from {
                transform: translateY(0);
            }

            to {
                transform: translateY(-300px);
            }
        }


        /* --- UI TOP --- */
        .top-ui {
            z-index: 20;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            color: white;
            padding-top: 15px;
        }

        .resource-pill {
            background: rgba(0, 0, 0, 0.6);
            padding: 5px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid #444;
            font-weight: bold;
            font-size: 14px;
        }

        .stamina-bar-container {
            width: 100px;
            height: 8px;
            background: #333;
            border-radius: 4px;
            margin-left: 8px;
            overflow: hidden;
        }

        .stamina-fill {
            height: 100%;
            background: #ffaa00;
            width: 100%;
            transition: width 0.3s;
        }

        /* --- DRAGON FIT --- */
        .dragon-stage {
            flex: 1;
            /* Take remaining space */
            min-height: 0;
            /* Allow shrinking */
            display: flex;
            align-items: center;
            /* Center Vertically */
            justify-content: center;
            position: relative;
            z-index: 10;
            padding: 20px;
        }

        /* The dragon scales to fit inside the flex box */
        .dragon-img {
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 100%;
            /* Fully contained */
            object-fit: contain;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.8));
            animation: breathe 3s ease-in-out infinite;
        }

        @keyframes breathe {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.02) translateY(-5px);
            }
        }

        /* --- BOTTOM UI --- */
        .bottom-ui {
            flex-shrink: 0;
            /* NEVER shrink this */
            z-index: 20;
            padding: 10px;
            background: linear-gradient(0deg, #111 0%, transparent 100%);
            padding-bottom: 30px;
            /* Safe area */
        }

        /* BOSS HP BAR */
        .boss-hp-wrapper {
            width: 96%;
            margin: 0 auto 15px auto;
        }

        .boss-meta {
            display: flex;
            justify-content: space-between;
            color: #ccc;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .boss-bar-frame {
            height: 18px;
            background: #220;
            border: 1px solid #550;
            border-radius: 4px;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .boss-bar-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #ff0000, #ff5500);
            transition: width 0.2s;
        }

        /* ATTACK BUTTONS */
        .btn-row {
            display: flex;
            gap: 10px;
            height: 70px;
        }

        .btn {
            flex: 1;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn.normal {
            background: linear-gradient(180deg, #3366cc, #224488);
            border-bottom: 4px solid #112255;
        }

        .btn.united {
            background: linear-gradient(180deg, #44aa44, #227722);
            border-bottom: 4px solid #114411;
        }

        .btn.special {
            background: linear-gradient(180deg, #cc4444, #882222);
            border-bottom: 4px solid #441111;
        }

        .btn-title {
            font-size: 14px;
            margin-bottom: 4px;
        }

        .btn-cost {
            font-size: 11px;
            opacity: 0.9;
        }

        /* DAMAGE TEXT */
        .damage-floater {
            position: absolute;
            color: #ffcc00;
            font-weight: bold;
            font-size: 40px;
            text-shadow: 0 0 10px #ff0000;
            opacity: 0;
            pointer-events: none;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
        }

        @keyframes damagePop {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
            }

            20% {
                transform: translate(-50%, -80%) scale(1.2);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -150%) scale(1);
                opacity: 0;
            }
        }
    </style>
</head>

<body>

    <div id="game-container">

        <!-- REAL IMAGE BACKGROUND -->
        <div class="boss-bg-layer"
            style="background: url('volcano_bg.png') no-repeat center center; background-size: cover;"></div>

        <!-- Overlay Effects -->
        <div class="magma-pulse"></div>
        <div class="bg-embers"></div>

        <!-- Top UI -->
        <div class="top-ui">
            <div class="resource-pill">
                <span>âš¡ Stamina</span>
                <div class="stamina-bar-container">
                    <div class="stamina-fill" id="staminaBar"></div>
                </div>
                <span id="staminaText" style="font-size:12px; margin-left:5px">50/50</span>
            </div>
            <div class="resource-pill">
                <span>ðŸ’Ž <span id="gemsText">5,717</span></span>
            </div>
        </div>

        <!-- Dragon -->
        <div class="dragon-stage">
            <img src="fire_dragon_transparent.png" class="dragon-img" id="dragon">
            <div class="damage-floater" id="damageText">999</div>
        </div>

        <!-- Bottom UI -->
        <div class="bottom-ui">
            <!-- BOSS HP -->
            <div class="boss-hp-wrapper">
                <div class="boss-meta">
                    <span>Dark Overlord</span>
                    <span>05:59:40</span>
                </div>
                <div class="boss-bar-frame">
                    <div class="boss-bar-fill" id="bossFill"></div>
                </div>
            </div>

            <!-- BUTTONS -->
            <div class="btn-row">
                <button class="btn normal" onclick="attack('normal')">
                    <span class="btn-title">Normal</span>
                    <span class="btn-cost">âš¡ 1 Stamina</span>
                </button>
                <button class="btn united" onclick="attack('united')">
                    <span class="btn-title">United</span>
                    <span class="btn-cost">âš¡ 5 Stamina</span>
                </button>
                <button class="btn special" onclick="attack('special')">
                    <span class="btn-title">Special</span>
                    <span class="btn-cost">ðŸ’Ž 10 Gems</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        const state = {
            bossHp: 50000,
            maxBossHp: 50000,
            stamina: 50,
            maxStamina: 50,
            gems: 5717
        };

        const el = {
            bossFill: document.getElementById('bossFill'),
            staminaFill: document.getElementById('staminaBar'),
            staminaText: document.getElementById('staminaText'),
            gemsText: document.getElementById('gemsText'),
            damageText: document.getElementById('damageText'),
            dragon: document.getElementById('dragon'),
            container: document.getElementById('game-container')
        };

        function updateUI() {
            // Boss
            const bossPct = (state.bossHp / state.maxBossHp) * 100;
            el.bossFill.style.width = bossPct + '%';

            // Stamina
            const stamPct = (state.stamina / state.maxStamina) * 100;
            el.staminaFill.style.width = stamPct + '%';
            el.staminaText.textContent = `${state.stamina}/${state.maxStamina}`;

            // Gems
            el.gemsText.textContent = state.gems.toLocaleString();
        }

        function attack(type) {
            // Costs
            let costStamina = 0;
            let costGems = 0;
            let damage = 0;
            let shake = 5;

            if (type === 'normal') { costStamina = 1; damage = 1500; }
            if (type === 'united') { costStamina = 5; damage = 8000; shake = 10; }
            if (type === 'special') { costGems = 10; damage = 50000; shake = 20; }

            // Checks
            if (state.stamina < costStamina) { alert("Need Stamina!"); return; }
            if (state.gems < costGems) { alert("Need Gems!"); return; }

            // Pay
            state.stamina -= costStamina;
            state.gems -= costGems;

            // Damage Loop (Visually random)
            const actualDmg = Math.floor(damage * (0.9 + Math.random() * 0.2));
            state.bossHp = Math.max(0, state.bossHp - actualDmg);

            // Visuals
            showDamage(actualDmg);
            shakeScreen(shake);
            animateDragon();
            updateUI();

            if (state.bossHp <= 0) {
                setTimeout(() => alert("VICTORY!"), 500);
            }
        }

        function showDamage(val) {
            el.damageText.textContent = val.toLocaleString();
            el.damageText.style.animation = 'none';
            el.damageText.offsetHeight; // trigger reflow
            el.damageText.style.animation = 'damagePop 0.8s ease-out';
        }

        function shakeScreen(amount) {
            const x = (Math.random() - 0.5) * amount;
            const y = (Math.random() - 0.5) * amount;
            el.container.style.transform = `translate(${x}px, ${y}px)`;
            setTimeout(() => el.container.style.transform = 'none', 100);
        }

        function animateDragon() {
            el.dragon.style.filter = "brightness(2) sepia(1) hue-rotate(-50deg) saturate(5)";
            el.dragon.style.transform = "scale(0.95)";
            setTimeout(() => {
                el.dragon.style.filter = "drop-shadow(0 10px 30px rgba(0,0,0,0.8))";
                el.dragon.style.transform = "scale(1)";
            }, 150);
        }
    </script>
</body>

</html>